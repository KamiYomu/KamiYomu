@page
@using KamiYomu.Web.Entities.Addons
@model KamiYomu.Web.Areas.Settings.Pages.CommunityCrawlers.IndexModel
@{
    ViewData["Title"] = I18n.Addons;
}


<div class="d-flex justify-content-between align-items-center m-3">
    <h2 class="h5 mb-0 text-primary">
        <i class="bi bi-node-plus-fill me-3" aria-hidden="true"></i>
        @I18n.Addons
    </h2>

    <div class="btn-toolbar">
        <div class="btn-group">
            <button class="btn btn-sm btn-outline-secondary"
                    title="@I18n.Delete"
                    aria-label="@I18n.Delete"
                    hx-get="/Settings/Add-ons/Dialogs/ListSourceDialog"
                    hx-target="#modal-body"
                    hx-swap="innerHTML"
                    data-bs-toggle="modal"
                    data-bs-target="#modal">
                <i class="bi bi-terminal-plus me-1"></i> @I18n.Sources
            </button>
        </div>
    </div>
</div>

<div class="container mt-5">
    <form hx-post="/Settings/Add-ons/Index?handler=Search" hx-target="#result" hx-swap="innerHTML" class="mt-3">
        <div class="mb-3">
            @Html.AntiForgeryToken()
            <label asp-for="Search" class="form-label">@I18n.Addons</label>
            <div class="input-group">
                <select asp-for="SourceId" class="form-select" style="max-width: 250px;">
                    <option value="">@I18n.SelectSource</option>
                    @foreach(var source in Model.Sources)
                    {
                        <option value="@source.Id">@source.DisplayName</option>
                    }
                </select>
                <input type="text" asp-for="Search" class="form-control" placeholder="@I18n.Search" required />
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-search me-3"></i>
                    @I18n.Search
                </button>
            </div>
        </div>
    </form>

    <div asp-validation-summary="All" class="text-danger"></div>

    <div id="result" class="mt-4">
        <partial name="_PackageList" model="Model.PackageListViewModel" />
    </div>
</div>